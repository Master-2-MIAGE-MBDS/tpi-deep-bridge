# Deep-Bridge

Le projet "Deep Bridge" vise à développer un programme basé sur l'intelligence artificielle pour détecter les sténoses
carotidiennes, qui pourraient être invisibles à l'œil nu lors d'une première lecture des scanners.

# Contexte

M. Galli nous a fourni un ensemble de dossiers patients (150) contenant des fichiers DICOM et un script
[`rotation_script.py`](rotation_script.py). Ce script permet de lire un ensemble de fichiers DICOM pour un patient
donné, d'analyser les images et d'afficher le résultat dans une fenêtre Tkinter. Notre objectif initial était
de comprendre ce script, rédigé par les étudiants de l'année précédente, et de l'optimiser.

Nous disposions également d'un dossier de fichiers DICOM fonctionnant parfaitement avec
[`rotation_script.py`](rotation_script.py), utilisé pour tester le script.

# Problèmes rencontrés

### Problème 1 : Le téléchargement des dossiers de patients

Les dossiers patients nous ont été fournis par M. Galli sous forme de fichiers `.cab` sur OneDrive. Nous avons
découvert que l'on ne pouvait pas tout télécharger d'un coup, car la taille totale des fichiers était trop importante.
Et surtout que le format des fichiers `.cab` posait un problème à OneDrive, qui ne pouvait pas les zipper correctement.

### Problème 2 : Le script ne fonctionne pas avec tous les dossiers de patients

Nous avons identifié que le script ne fonctionnait pas correctement avec certains dossiers de patients. Nous avons
découvert que les fichiers n'étaient parfois pas correctement classés dans les dossiers des patients et que certains
scans ne contenaient qu'un seul fichier DICOM.

# Traitement des données

Afin de résoudre ces problèmes, nous avons décidé d'écrire un autre script
[`organize_dicom_files.py`](organize_dicom_files.py)qui lit tous les fichiers
dans tous les dossiers et les classe par patient et par scan. Ceci nous permettra de nous assurer que les fichiers sont
correctement organisés et facilitera l'analyse des images pour détecter les sténoses carotidiennes.

### Le script [`organize_dicom_files.py`](organize_dicom_files.py)

Voici un aperçu des principales fonctionnalités du script :

<ol>
<li>Le script lit les métadonnées des fichiers DICOM en utilisant la bibliothèque pydicom.</li>
<li>Il vérifie si le fichier est un scan CT (tomodensitométrie) et extrait l'ID du patient et l'UID de la série.</li>
<li>Le script crée un nouveau dossier pour chaque patient et série de scans, s'ils n'existent pas déjà.</li>
<li>Il déplace les fichiers DICOM valides vers les dossiers correspondants aux patients et aux séries de scans.</li>
<li>Les fichiers DICOM invalides sont déplacés vers un dossier spécifique invalid_dicom_files.</li>
<li>Les fichiers non-DICOM sont également identifiés et les fichiers avec l'extension .cab sont supprimés.</li>
<li>Enfin, le script affiche des messages d'information et d'avertissement pour faciliter le suivi de son exécution.</li>
</ol>

Pour utiliser le script, il suffit d'exécuter la commande suivante :

```bash
python organize_dicom_files.py <source_folder> <output_folder>
```

où `<source_folder>` est le dossier contenant les fichiers DICOM à organiser.

### Analyse des résultats du script [`organize_dicom_files.py`](organize_dicom_files.py)

Pour l'analyse des résultats, on a utilisé le script [`analyse_results.py`](analyse_results.py).
PS : On ne compte pas les fichiers qui ne sont pas des fichiers DICOM ou qui commence par un point dans cette analyse.

Initialement, on a les données suivantes :

| Nombre de dossiers patients | Nombre de scans | Nombre de fichiers DICOM |
|-----------------------------|-----------------|--------------------------|
| 150                         | 204             | 138 008                  |

Après avoir exécuté le script [`organize_dicom_files.py`](organize_dicom_files.py), on obtient les données suivantes :

| Nombre de dossiers patients | Nombre de scans | Nombre de fichiers DICOM |
|-----------------------------|-----------------|--------------------------|
| 148                         | 192             | 135 572                  |


<details>
<summary>Tableau 3 : Nombre de scans par patient</summary>

| ID Patient   | Nombre de Scans |
|:-------------|:---------------:|
| 1350553313   |        1        |
| 1350593310   |        1        |
| 1350643714   |        1        |
| 1350653514   |        1        |
| 1350663716   |        1        |
| 1350713918   |        1        |
| 1351503212   |        1        |
| 1351543410   |        1        |
| 1351553512   |        1        |
| 1351573710   |        1        |
| 1351653812   |        1        |
| 1351683518   |        1        |
| 1351753719   |        1        |
| 1352503411   |        1        |
| 1352563011   |        1        |
| 1352583213   |        1        |
| 1352633119   |        1        |
| 1352633614   |        1        |
| 1352663316   |        1        |
| 1352703418   |        1        |
| 1352763916   |        1        |
| 1353623118   |        1        |
| 1353673610   |        1        |
| 1353673812   |        1        |
| 1353703618   |        1        |
| 1353713517   |        1        |
| 1354633215   |        1        |
| 1354683417   |        1        |
| 1355603213   |        1        |
| 1355623012   |        1        |
| 1355663817   |        1        |
| 1355683212   |        1        |
| 1355713217   |        1        |
| 1355723813   |        1        |
| 1355773817   |        1        |
| 1356513110   |        1        |
| 1356653615   |        1        |
| 1356663812   |        1        |
| 1356713715   |        1        |
| 1357633010   |        1        |
| 1357653710   |        1        |
| 1357703218   |        1        |
| 1357713617   |        1        |
| 1357733515   |        1        |
| 1357753710   |        1        |
| 1357753916   |        1        |
| 1357773815   |        1        |
| 1358633118   |        1        |
| 1358633719   |        1        |
| 1358653214   |        1        |
| 1358673217   |        1        |
| 1358673519   |        1        |
| 1358673713   |        1        |
| 1358713614   |        1        |
| 1358733219   |        1        |
| 1358743519   |        1        |
| 1358753512   |        1        |
| 1358753618   |        1        |
| 1358773618   |        1        |
| 1358773913   |        1        |
| 1358863719   |        1        |
| 1359663410   |        1        |
| 1359663613   |        1        |
| 1359673019   |        1        |
| 1359683717   |        1        |
| 1359693515   |        1        |
| 1359793319   |        1        |
| 1359813415   |        1        |
| 1450931142   |        1        |
| 2352453111   |        1        |
| 2352483710   |        1        |
| 2352553910   |        1        |
| 2352623116   |        1        |
| 2353493212   |        1        |
| 2354563810   |        1        |
| 2354603012   |        1        |
| 2355553412   |        1        |
| 2355593713   |        1        |
| 2356553117   |        1        |
| 2356613613   |        1        |
| 2357623713   |        1        |
| 0352643918   |        1        |
| 0359753818   |        1        |
| 0350543614   |        1        |
| 0356593910   |        1        |
| 94583837119  |        1        |
| 0457936153   |        1        |
| 0354553513   |        1        |
| 0351583811   |        1        |
| 0457930151   |        1        |
| 0355603011   |        1        |
| 94511135107  |        1        |
| 0358633612   |        1        |
| 0355643619   |        1        |
| 0357683718   |        1        |
| 0358633613   |        1        |
| 0359613510   |        1        |
| 0350523511   |        1        |
| 14501336107  |        1        |
| 0352653415   |        1        |
| 0358753715   |        1        |
| 0358623212   |        1        |
| 94502238106  |        1        |
| 0352593515   |        1        |
| 0353743718   |        1        |
| 0353723819   |        1        |
| 04571438194  |        1        |
| 94561030163  |        1        |
| 0359653015   |        1        |
| 0359663416   |        1        |
| 0457937105   |        1        |
| 0351713916   |        1        |
| 0353533010   |        1        |
| 0353573313   |        1        |
| 0354653812   |        1        |
| 0350563315   |        1        |
| 0351603315   |        1        |
| 0351643812   |        1        |
| 0352763915   |        1        |
| 0356763316   |        1        |
| 04571438144  |        1        |
| 345064341295 |        1        |
| 0356663913   |        1        |
| 0352643411   |        1        |
| 0350653512   |        1        |
| 9358743817   |        1        |
| 0355703518   |        1        |
| 0356633312   |        1        |
| 0457933131   |        1        |
| 0350593215   |        1        |
| 0351543316   |        1        |
| 0354463112   |        1        |
| 0355573511   |        1        |
| 0358703915   |        1        |
| 0353683019   |        1        |
| 0358673714   |        1        |
| 0359623013   |        1        |
| 0353533113   |        1        |
| 9453232101   |        1        |
| 0354593812   |        1        |
| 0355653219   |        1        |
| 0356683819   |        1        |
| 1351653614   |        3        |
| 1359643015   |        5        |
| 0350623919   |        6        |
| 0351503614   |        6        |
| 0356693416   |       11        |
| 1359723314   |       19        |

</details>


Suite à l'exécution du script, il est observé que 2 dossiers patients et 12 séries d'images ont été éliminés. De plus,
2 436 fichiers DICOM ont été retirés du jeu de données.

Il est également constaté que des incohérences subsistent concernant le nombre de fichiers DICOM par scan. On peut
observer que certains scans ne contiennent qu'un seul fichier dicom alors que le scan avec le plus grand nombre de
fichiers contient 2 003 fichiers (ne prend pas les fichiers dicom dont les noms commencent par un point).


<details>
<summary>Tableau 4 : Nombre de fichiers DICOM par scan</summary>

| UID Scan                                                         | # DICOM files |
|------------------------------------------------------------------|---------------|
| 2.16.840.1.113669.632.21.1653047040.1345728370.40701910321983208 | 1             |
| 2.16.840.1.113669.632.21.1653047040.1345728370.18472639912989039 | 1             |
| 2.16.840.1.113669.632.21.1653047040.1345728370.18462153672968919 | 1             |
| 2.16.840.1.113669.632.21.1434811657.1889886034.88237825269785108 | 1             |
| 2.16.840.1.113669.632.21.1518758148.813018979.186459887021773101 | 1             |
| 2.16.840.1.113669.632.21.1401581570.2685747106.20459161902428661 | 1             |
| 2.16.840.1.113669.632.21.1401581570.2685747106.67150688728686391 | 1             |
| 2.16.840.1.113669.632.21.1401581570.2685747106.67255551128887591 | 1             |
| 2.16.840.1.113669.632.21.1518758148.813018979.260396370230192065 | 1             |
| 2.16.840.1.113669.632.21.1250388482.1355635.10131218632888999141 | 1             |
| 2.16.840.1.113669.632.21.1384607493.1348808563.21372644692257781 | 1             |
| 2.16.840.1.113669.632.21.1250388482.1355635.10120734472798399141 | 1             |
| 2.16.840.1.113669.632.21.1518758148.813018979.261340083830393265 | 1             |
| 2.16.840.1.113669.632.21.1250388482.1355635.10141704552868879141 | 1             |
| 2.16.840.1.113669.632.21.1250388482.1355635.10110248232838679141 | 1             |
| 2.16.840.1.113669.632.21.1434811657.1889886034.35936652732507971 | 1             |
| 2.16.840.1.113669.632.21.1250388482.1355635.36419524232377771506 | 1             |
| 2.16.840.1.113669.632.21.1434811657.1889886034.88237841268777108 | 1             |
| 2.16.840.1.113669.632.21.1250388482.1355635.22938670072508411506 | 1             |
| 2.16.840.1.113669.632.21.1250388482.1355635.47065696727882891414 | 1             |
| 2.16.840.1.113669.632.21.1250388482.1355635.10141705352858799141 | 1             |
| 2.16.840.1.113669.632.21.1434811657.1889886034.97228657282818107 | 1             |
| 2.16.840.1.113669.632.21.1250388482.1355635.10110247752828599141 | 1             |
| 2.16.840.1.113669.632.21.1434811657.1889886034.98277217284830107 | 1             |
| 2.16.840.1.113669.632.21.1250388482.1355635.10120733672808479141 | 1             |
| 2.16.840.1.113669.632.21.1384607493.1348808563.11728424393059179 | 1             |
| 2.16.840.1.113669.632.21.1250388482.1355635.30991756312558461506 | 2             |
| 2.16.840.1.113669.632.21.1434811657.1889886034.11944825692548231 | 2             |
| 2.16.840.1.113669.632.21.1401581570.2685747106.21852141452678464 | 5             |
| 2.16.840.1.113669.632.21.1653047040.1345728370.38137820217729339 | 6             |
| 2.16.840.1.113669.632.21.1250388482.1355635.30991320952588491506 | 9             |
| 2.16.840.1.113669.632.21.1434811657.1889886034.30826409371996803 | 24            |
| 2.16.840.1.113669.632.21.1518758148.813018979.272383945022083534 | 24            |
| 2.16.840.1.113669.632.21.1434811657.1889886034.11483713462709477 | 29            |
| 2.16.840.1.113669.632.21.1401581570.2685747106.22606715011917023 | 29            |
| 2.16.840.1.113669.632.21.1653047040.1345728370.60276598219461533 | 34            |
| 2.16.840.1.113669.632.21.1250388482.1355635.16255855032668067092 | 51            |
| 2.16.840.1.113669.632.21.1434811657.1889886034.30826410172026833 | 85            |
| 2.16.840.1.113669.632.21.1250388482.1355635.17094715832698127092 | 106           |
| 2.16.840.1.113669.632.21.1250388482.1355635.16926943672708147092 | 106           |
| 2.16.840.1.113669.632.21.1619032067.537267970.655795002026273972 | 112           |
| 2.16.840.1.113669.632.21.1434811657.1889886034.30826409052016823 | 138           |
| 2.16.840.1.113669.632.21.1434811657.1889886034.30826410012036843 | 168           |
| 2.16.840.1.113669.632.21.1250388482.1355635.16591399352688107092 | 176           |
| 2.16.840.1.113669.632.21.1250388482.1355635.30991387672608561506 | 238           |
| 2.16.840.1.113669.632.21.1250388482.1355635.23752281112658465064 | 238           |
| 2.16.840.1.113669.632.21.113634824.1085291611.243782229824483514 | 440           |
| 2.16.840.1.113669.632.21.1384214788.2960469778.19104654612588341 | 449           |
| 2.16.840.1.113669.632.21.1468094720.808812304.182949653625081714 | 449           |
| 2.16.840.1.113669.632.21.1266999556.2960441163.34421615712507631 | 462           |
| 2.16.840.1.113669.632.21.1635937536.1882595107.26390931732559034 | 464           |
| 2.16.840.1.113669.632.21.2512801028.1887067233.28073373582287384 | 466           |
| 2.16.840.1.113669.632.21.1266772997.1617215251.35022031773169631 | 471           |
| 2.16.840.1.113669.632.21.1518366470.1347792643.40886923742648151 | 504           |
| 2.16.840.1.113669.632.21.1400994821.1617248018.34996056762517651 | 508           |
| 2.16.840.1.113669.632.21.1468296456.1890942787.41799205042668411 | 510           |
| 2.16.840.1.113669.632.21.1149464069.1080315699.30120896063471066 | 517           |
| 2.16.840.1.113669.632.21.1652914692.7745362.18217579340104652068 | 518           |
| 2.16.840.1.113669.632.21.1669757446.5652322.27046979752597771487 | 519           |
| 2.16.840.1.113669.632.21.1434480646.2689949442.35123935842116421 | 527           |
| 2.16.840.1.113669.632.21.3146411526.1079754659.17098414842531004 | 531           |
| 2.16.840.1.113669.632.21.506781954.2953950027.353758820331889159 | 531           |
| 2.16.840.1.113669.632.21.1669757705.279330658.282725309727889114 | 535           |
| 2.16.840.1.113669.632.21.1451322120.280325907.798266351332114268 | 536           |
| 2.16.840.1.113669.632.21.1149529857.1344556867.40928385392448086 | 539           |
| 2.16.840.1.113669.632.21.1451516166.2958389059.17097008053551089 | 549           |
| 2.16.840.1.113669.632.21.1535404807.273006403.380147369125576314 | 552           |
| 2.16.840.1.113669.632.21.1904367621.543629088.351810890424568614 | 553           |
| 2.16.840.1.113669.632.21.1652648965.1617309459.35042887312447511 | 557           |
| 2.16.840.1.113669.632.21.1250388482.1355635.30991692152508331506 | 558           |
| 2.16.840.1.113669.632.21.2760194099.587878230.384002602524977014 | 559           |
| 2.16.840.1.113669.632.21.1267429127.1346682803.26849294073481077 | 561           |
| 2.16.840.1.113669.632.21.1367506180.1886723874.21919873242628081 | 564           |
| 2.16.840.1.113669.632.21.3129371905.1881911139.16210503102688871 | 572           |
| 2.16.840.1.113669.632.21.1703112713.2695257906.17786314193229791 | 572           |
| 2.16.840.1.113669.632.21.1669495810.1612070690.30787427132527631 | 574           |
| 2.16.840.1.113669.632.21.1351252232.817172386.301733688627187214 | 574           |
| 2.16.840.1.113669.632.21.1619032583.4591362.38546903462638251452 | 574           |
| 2.16.840.1.113669.632.21.1367693314.538255184.217818827826382314 | 575           |
| 2.16.840.1.113669.632.21.1367768325.1885675362.38628003583261136 | 578           |
| 2.16.840.1.113669.632.21.1434476289.1344626432.33356511902788741 | 581           |
| 2.16.840.1.113669.632.21.1384544768.3485538.28448508582547591454 | 582           |
| 2.16.840.1.113669.632.21.1719753989.1885761296.24984881982648011 | 582           |
| 2.16.840.1.113669.632.21.1535212290.269860626.266714378734911342 | 593           |
| 2.16.840.1.113669.632.21.1451256576.271937283.417389874032211417 | 593           |
| 2.16.840.1.113669.632.21.1183083265.270823235.251526442225376014 | 597           |
| 2.16.840.1.113669.632.21.1519020295.809873315.379082735426880514 | 597           |
| 2.16.840.1.113669.632.21.1417698818.1075138304.38011583992306711 | 599           |
| 2.16.840.1.113669.632.21.1703172101.543579968.322482682225877214 | 600           |
| 2.16.840.1.113669.632.21.1736659206.2958458672.41538029832357703 | 601           |
| 2.16.840.1.113669.632.21.1887525641.279383824.278105221627689014 | 602           |
| 2.16.840.1.113669.632.21.1719827463.1615228706.27290536892607471 | 602           |
| 2.16.840.1.113669.632.21.1635995653.2691047216.62681445325084414 | 605           |
| 2.16.840.1.113669.632.21.1082883588.1081348018.32540911612507431 | 611           |
| 2.16.840.1.113669.632.21.1267101696.2687811426.16191543602547881 | 612           |
| 2.16.840.1.113669.632.21.1149657351.2957266787.19751484752508856 | 618           |
| 2.16.840.1.113669.632.21.1652780551.1078341427.19235549182627961 | 619           |
| 2.16.840.1.113669.632.21.1518758921.1621471075.25865094783159533 | 620           |
| 2.16.840.1.113669.632.21.1082814722.2954104738.20154702802578241 | 621           |
| 2.16.840.1.113669.632.21.1434548739.352018.329775581425878914962 | 622           |
| 2.16.840.1.113669.632.21.1149591557.2690928467.21729952542367990 | 625           |
| 2.16.840.1.113669.632.21.1636203529.1621499746.19167620152588501 | 627           |
| 2.16.840.1.113669.632.21.1518628360.1085648707.14163611213239127 | 631           |
| 2.16.840.1.113669.632.21.774139651.1342353987.125558190823571714 | 632           |
| 2.16.840.1.113669.632.21.790948865.1612882507.333204724125575614 | 648           |
| 2.16.840.1.113669.632.21.1635936518.810950435.390177671423771214 | 653           |
| 2.16.840.1.113669.632.21.1535601413.275103603.306814688726685914 | 656           |
| 2.16.840.1.113669.632.21.2743482403.571096934.262120671017053481 | 658           |
| 2.16.840.1.113669.632.21.1166375430.5529426.20670581602357303551 | 659           |
| 2.16.840.1.113669.632.21.1401384452.1081425779.31258707772538172 | 667           |
| 2.16.840.1.113669.632.21.1434873605.1348820835.16171042092247091 | 716           |
| 2.16.840.1.113669.632.21.1250585097.10792867.1752216613237753342 | 722           |
| 2.16.840.1.113669.632.21.1719688713.1084649216.38263159032811365 | 804           |
| 2.16.840.1.113669.632.21.1904434696.1085742896.31996451772165985 | 980           |
| 2.16.840.1.113669.632.21.1384210693.2959421203.16898980252447501 | 1027          |
| 2.16.840.1.113669.632.21.1350656263.2957315859.20872185923379014 | 1037          |
| 2.16.840.1.113669.632.21.1267362820.1618263971.32109168472348281 | 1059          |
| 2.16.840.1.113669.632.21.1384868872.1622486963.14215677072427571 | 1064          |
| 2.16.840.1.113669.632.21.1535862787.537247667.213188752523882813 | 1072          |
| 2.16.840.1.113669.632.21.688943364.2960310530.201538959622473413 | 1073          |
| 2.16.840.1.113669.632.21.1535143431.1078312707.29677650982447939 | 1086          |
| 2.16.840.1.113669.632.21.2760325203.621432694.176091396724285113 | 1095          |
| 2.16.840.1.113669.632.21.1267105285.1080344418.26857360392438571 | 1098          |
| 2.16.840.1.113669.632.21.1703110657.539385651.153506238227385913 | 1099          |
| 2.16.840.1.113669.632.21.1468427011.268795747.174224288624584051 | 1100          |
| 2.16.840.1.113669.632.21.1401253382.1079328595.77608654623884914 | 1101          |
| 2.16.840.1.113669.632.21.277215251.553717594.4438116332167261337 | 1120          |
| 2.16.840.1.113669.632.21.1166437889.1076125539.28918054842277301 | 1133          |
| 2.16.840.1.113669.632.21.1384607493.1348808563.20871340182247117 | 1136          |
| 2.16.840.1.113669.632.21.1518762245.811970402.771047674239833140 | 1136          |
| 2.16.840.1.113669.632.21.1652780292.1886793523.20996769512408891 | 1136          |
| 2.16.840.1.113669.632.21.1451916037.275083170.3005738292508971.1 | 1144          |
| 2.16.840.1.113669.632.21.1451321602.806711059.208887246241835132 | 1144          |
| 2.16.840.1.113669.632.21.2004973574.542605074.102791181724182714 | 1144          |
| 2.16.840.1.113669.632.21.1518697734.1884663634.53517443223988413 | 1147          |
| 2.16.840.1.113669.632.21.1417898243.805654323.293874716125587513 | 1149          |
| 2.16.840.1.113669.632.21.1401383941.1617248115.31229713932488731 | 1151          |
| 2.16.840.1.113669.632.21.677570816.808637995.1408643912327701425 | 1155          |
| 2.16.840.1.113669.632.21.1535606279.1078312818.96287320724287014 | 1155          |
| 2.16.840.1.113669.632.21.1451917060.1349873570.52684430823882413 | 1157          |
| 2.16.840.1.113669.632.21.1736536329.2963701522.29739057522508671 | 1160          |
| 2.16.840.1.113669.632.21.1116368389.1080307619.20379937022428491 | 1160          |
| 2.16.840.1.113669.632.21.1619228931.805703474.137533807426798913 | 1161          |
| 2.16.840.1.113669.632.21.1669360133.6700803.80466029522883914026 | 1163          |
| 2.16.840.1.113669.632.21.1418427912.1085624242.28615667072187501 | 1166          |
| 2.16.840.1.113669.632.21.1099656448.1882464179.10312776242438861 | 1166          |
| 2.16.840.1.113669.632.21.1267362563.268746659.913684622247849142 | 1166          |
| 2.16.840.1.113669.632.21.1652648704.271986451.315661525925488613 | 1172          |
| 2.16.840.1.113669.632.21.1451391232.808808226.370234956922477714 | 1172          |
| 2.16.840.1.113669.632.21.1518369026.806727426.149487484725689113 | 1174          |
| 2.16.840.1.113669.632.21.1417899525.1080381235.13320754232498851 | 1178          |
| 2.16.840.1.113669.632.21.1652715784.2964729634.13464818312548621 | 1191          |
| 2.16.840.1.113669.632.21.2759944259.604655379.122398789626091313 | 1194          |
| 2.16.840.1.113669.632.21.1267166977.1344585587.73965466624789013 | 1196          |
| 2.16.840.1.113669.632.21.1518566401.1613082418.29260906322539071 | 1197          |
| 2.16.840.1.113669.632.21.1149660163.1610895203.45194251625190013 | 1200          |
| 2.16.840.1.113669.632.21.2760202243.537546576.127465953725894713 | 1204          |
| 2.16.840.1.113669.632.21.1082420225.1612975939.10229691592248201 | 1210          |
| 2.16.840.1.113669.632.21.1368092676.2692030386.10750538342458344 | 1215          |
| 2.16.840.1.113669.632.21.1099259910.2689867603.97860987923986114 | 1215          |
| 2.16.840.1.113669.632.21.1351313410.538251187.956440330255891141 | 1215          |
| 2.16.840.1.113669.632.21.1518758148.813018979.183086057822881213 | 1218          |
| 2.16.840.1.113669.632.21.1669824260.1349926770.65853531922074014 | 1223          |
| 2.16.840.1.113669.632.21.1116041217.2686725970.27055245312388481 | 1224          |
| 2.16.840.1.113669.632.21.1635805960.280370947.206408861024191513 | 1226          |
| 2.16.840.1.113669.632.21.1518562566.1884663603.18659216852439151 | 1226          |
| 2.16.840.1.113669.632.21.1435136264.2964676514.10056787752408601 | 1227          |
| 2.16.840.1.113669.632.21.1401581570.2685747106.18791947372579301 | 1230          |
| 2.16.840.1.113669.632.21.1182818562.2954129155.37321714022482161 | 1232          |
| 2.16.840.1.113669.632.21.1367830275.1342513011.15426175182468881 | 1237          |
| 2.16.840.1.113669.632.21.1535798787.1074118563.13947702122473613 | 1242          |
| 2.16.840.1.113669.632.21.1149987584.271863731.270356208124084413 | 1245          |
| 2.16.840.1.113669.632.21.1736473605.1617329922.45928224322275413 | 1251          |
| 2.16.840.1.113669.632.21.1183080711.2957274947.15972039912338361 | 1259          |
| 2.16.840.1.113669.632.21.1266704391.2688859907.15837161322438511 | 1259          |
| 2.16.840.1.113669.632.21.1535798279.1615183779.52140616423583913 | 1262          |
| 2.16.840.1.113669.632.21.1133207553.2686730163.64510893223882514 | 1270          |
| 2.16.840.1.113669.632.21.1535213315.1342553874.31887911402488529 | 1270          |
| 2.16.840.1.113669.632.21.1368025091.537206691.913324547215705141 | 1272          |
| 2.16.840.1.113669.632.21.1367697926.5578579.18823273792448441355 | 1275          |
| 2.16.840.1.113669.632.21.689795332.2960310738.189622026224588313 | 1276          |
| 2.16.840.1.113669.632.21.1468100869.2959441682.99341222623681414 | 1278          |
| 2.16.840.1.113669.632.21.1267429125.1348779955.43866347423684813 | 1289          |
| 2.16.840.1.113669.632.21.1183546368.1614049202.68009587622183913 | 1295          |
| 2.16.840.1.113669.632.21.1082879744.1345589171.13902313622884114 | 1299          |
| 2.16.840.1.113669.632.21.1099329542.2689867618.10554575362288291 | 1309          |
| 2.16.840.1.113669.632.21.1250652421.2959388594.10067411922377851 | 1335          |
| 2.16.840.1.113669.632.21.1434542342.2958384915.23325136122480214 | 1355          |
| 2.16.840.1.113669.632.21.1653047040.1345728370.29055982323883213 | 1355          |
| 2.16.840.1.113669.632.21.1350790919.1346703155.11584825824785214 | 1424          |
| 2.16.840.1.113669.632.21.1535147779.1342553858.79108565923984814 | 1622          |
| 2.16.840.1.113669.632.21.1669556745.10895155.1547144613254907137 | 2003          |

</details>


Sachant que maintenant certains scans ne contiennent qu'un seul fichier, on va essayer de voir ce que contient
ce fichier et si on peut s'en servir pour la suite ou si on élimine ces scans.

On a testé avec le patient dont l'ID est `0350623919` et le scan UID est
`2.16.840.1.113669.632.21.1401581570.2685747106.20459161902428661`.

Le chemin absolu du scan est le suivant :

```bash
/Volumes/exFAT_Adams/deepbridge_result/0350623919/2.16.840.1.113669.632.21.1401581570.2685747106.20459161902428661/1.2.840.113619.2.55.3.2148147470.648.1353479280.921.dcm
```

Cela sera surement différent sur votre machine. En lisant le fichier dicom avec le script
[`rotation_script.py`](rotation_script.py) on constate déjà que le fichier dicom n'a pas d'attribut SliceLocation, donc
inutilisable pour la suite du script.

Pour être sûr que l'on ne peut pas utiliser ces scans, on a testé tous les scans de tous les patients avec la
fonction [`slice_location_search`](analyse_results.py) et tous les scans contenant 1 fichier
dicom n'ont pas d'attribut SliceLocation. On a 30 dossiers de scans qui contenaient des fichiers dicom sans
attribut SliceLocation.


<details>
<summary>Tableau 5 : Il nous reste ces dossiers à traiter </summary>

| UID Scan                                                         | # DICOM files |
|------------------------------------------------------------------|---------------|
| 2.16.840.1.113669.632.21.1250388482.1355635.30991756312558461506 | 2             |
| 2.16.840.1.113669.632.21.1434811657.1889886034.11944825692548231 | 2             |
| 2.16.840.1.113669.632.21.1250388482.1355635.30991320952588491506 | 9             |
| 2.16.840.1.113669.632.21.1434811657.1889886034.30826409371996803 | 24            |
| 2.16.840.1.113669.632.21.1401581570.2685747106.22606715011917023 | 29            |
| 2.16.840.1.113669.632.21.1653047040.1345728370.60276598219461533 | 34            |
| 2.16.840.1.113669.632.21.1250388482.1355635.16255855032668067092 | 51            |
| 2.16.840.1.113669.632.21.1434811657.1889886034.30826410172026833 | 85            |
| 2.16.840.1.113669.632.21.1250388482.1355635.17094715832698127092 | 106           |
| 2.16.840.1.113669.632.21.1250388482.1355635.16926943672708147092 | 106           |
| 2.16.840.1.113669.632.21.1619032067.537267970.655795002026273972 | 112           |
| 2.16.840.1.113669.632.21.1434811657.1889886034.30826409052016823 | 138           |
| 2.16.840.1.113669.632.21.1434811657.1889886034.30826410012036843 | 168           |
| 2.16.840.1.113669.632.21.1250388482.1355635.16591399352688107092 | 176           |
| 2.16.840.1.113669.632.21.1250388482.1355635.30991387672608561506 | 238           |
| 2.16.840.1.113669.632.21.1250388482.1355635.23752281112658465064 | 238           |
| 2.16.840.1.113669.632.21.113634824.1085291611.243782229824483514 | 440           |
| 2.16.840.1.113669.632.21.1384214788.2960469778.19104654612588341 | 449           |
| 2.16.840.1.113669.632.21.1468094720.808812304.182949653625081714 | 449           |
| 2.16.840.1.113669.632.21.1266999556.2960441163.34421615712507631 | 462           |
| 2.16.840.1.113669.632.21.1635937536.1882595107.26390931732559034 | 464           |
| 2.16.840.1.113669.632.21.2512801028.1887067233.28073373582287384 | 466           |
| 2.16.840.1.113669.632.21.1266772997.1617215251.35022031773169631 | 471           |
| 2.16.840.1.113669.632.21.1518366470.1347792643.40886923742648151 | 504           |
| 2.16.840.1.113669.632.21.1400994821.1617248018.34996056762517651 | 508           |
| 2.16.840.1.113669.632.21.1468296456.1890942787.41799205042668411 | 510           |
| 2.16.840.1.113669.632.21.1149464069.1080315699.30120896063471066 | 517           |
| 2.16.840.1.113669.632.21.1652914692.7745362.18217579340104652068 | 518           |
| 2.16.840.1.113669.632.21.1669757446.5652322.27046979752597771487 | 519           |
| 2.16.840.1.113669.632.21.1434480646.2689949442.35123935842116421 | 527           |
| 2.16.840.1.113669.632.21.3146411526.1079754659.17098414842531004 | 531           |
| 2.16.840.1.113669.632.21.506781954.2953950027.353758820331889159 | 531           |
| 2.16.840.1.113669.632.21.1669757705.279330658.282725309727889114 | 535           |
| 2.16.840.1.113669.632.21.1451322120.280325907.798266351332114268 | 536           |
| 2.16.840.1.113669.632.21.1149529857.1344556867.40928385392448086 | 539           |
| 2.16.840.1.113669.632.21.1451516166.2958389059.17097008053551089 | 549           |
| 2.16.840.1.113669.632.21.1535404807.273006403.380147369125576314 | 552           |
| 2.16.840.1.113669.632.21.1904367621.543629088.351810890424568614 | 553           |
| 2.16.840.1.113669.632.21.1652648965.1617309459.35042887312447511 | 557           |
| 2.16.840.1.113669.632.21.1250388482.1355635.30991692152508331506 | 558           |
| 2.16.840.1.113669.632.21.2760194099.587878230.384002602524977014 | 559           |
| 2.16.840.1.113669.632.21.1267429127.1346682803.26849294073481077 | 561           |
| 2.16.840.1.113669.632.21.1367506180.1886723874.21919873242628081 | 564           |
| 2.16.840.1.113669.632.21.3129371905.1881911139.16210503102688871 | 572           |
| 2.16.840.1.113669.632.21.1703112713.2695257906.17786314193229791 | 572           |
| 2.16.840.1.113669.632.21.1669495810.1612070690.30787427132527631 | 574           |
| 2.16.840.1.113669.632.21.1351252232.817172386.301733688627187214 | 574           |
| 2.16.840.1.113669.632.21.1619032583.4591362.38546903462638251452 | 574           |
| 2.16.840.1.113669.632.21.1367693314.538255184.217818827826382314 | 575           |
| 2.16.840.1.113669.632.21.1367768325.1885675362.38628003583261136 | 578           |
| 2.16.840.1.113669.632.21.1434476289.1344626432.33356511902788741 | 581           |
| 2.16.840.1.113669.632.21.1384544768.3485538.28448508582547591454 | 582           |
| 2.16.840.1.113669.632.21.1719753989.1885761296.24984881982648011 | 582           |
| 2.16.840.1.113669.632.21.1535212290.269860626.266714378734911342 | 593           |
| 2.16.840.1.113669.632.21.1451256576.271937283.417389874032211417 | 593           |
| 2.16.840.1.113669.632.21.1183083265.270823235.251526442225376014 | 597           |
| 2.16.840.1.113669.632.21.1519020295.809873315.379082735426880514 | 597           |
| 2.16.840.1.113669.632.21.1417698818.1075138304.38011583992306711 | 599           |
| 2.16.840.1.113669.632.21.1703172101.543579968.322482682225877214 | 600           |
| 2.16.840.1.113669.632.21.1736659206.2958458672.41538029832357703 | 601           |
| 2.16.840.1.113669.632.21.1887525641.279383824.278105221627689014 | 602           |
| 2.16.840.1.113669.632.21.1719827463.1615228706.27290536892607471 | 602           |
| 2.16.840.1.113669.632.21.1635995653.2691047216.62681445325084414 | 605           |
| 2.16.840.1.113669.632.21.1082883588.1081348018.32540911612507431 | 611           |
| 2.16.840.1.113669.632.21.1267101696.2687811426.16191543602547881 | 612           |
| 2.16.840.1.113669.632.21.1149657351.2957266787.19751484752508856 | 618           |
| 2.16.840.1.113669.632.21.1652780551.1078341427.19235549182627961 | 619           |
| 2.16.840.1.113669.632.21.1518758921.1621471075.25865094783159533 | 620           |
| 2.16.840.1.113669.632.21.1082814722.2954104738.20154702802578241 | 621           |
| 2.16.840.1.113669.632.21.1434548739.352018.329775581425878914962 | 622           |
| 2.16.840.1.113669.632.21.1149591557.2690928467.21729952542367990 | 625           |
| 2.16.840.1.113669.632.21.1636203529.1621499746.19167620152588501 | 627           |
| 2.16.840.1.113669.632.21.1518628360.1085648707.14163611213239127 | 631           |
| 2.16.840.1.113669.632.21.774139651.1342353987.125558190823571714 | 632           |
| 2.16.840.1.113669.632.21.790948865.1612882507.333204724125575614 | 648           |
| 2.16.840.1.113669.632.21.1635936518.810950435.390177671423771214 | 653           |
| 2.16.840.1.113669.632.21.1535601413.275103603.306814688726685914 | 656           |
| 2.16.840.1.113669.632.21.2743482403.571096934.262120671017053481 | 658           |
| 2.16.840.1.113669.632.21.1166375430.5529426.20670581602357303551 | 659           |
| 2.16.840.1.113669.632.21.1401384452.1081425779.31258707772538172 | 667           |
| 2.16.840.1.113669.632.21.1434873605.1348820835.16171042092247091 | 716           |
| 2.16.840.1.113669.632.21.1250585097.10792867.1752216613237753342 | 722           |
| 2.16.840.1.113669.632.21.1719688713.1084649216.38263159032811365 | 804           |
| 2.16.840.1.113669.632.21.1904434696.1085742896.31996451772165985 | 980           |
| 2.16.840.1.113669.632.21.1384210693.2959421203.16898980252447501 | 1027          |
| 2.16.840.1.113669.632.21.1350656263.2957315859.20872185923379014 | 1037          |
| 2.16.840.1.113669.632.21.1267362820.1618263971.32109168472348281 | 1059          |
| 2.16.840.1.113669.632.21.1384868872.1622486963.14215677072427571 | 1064          |
| 2.16.840.1.113669.632.21.1535862787.537247667.213188752523882813 | 1072          |
| 2.16.840.1.113669.632.21.688943364.2960310530.201538959622473413 | 1073          |
| 2.16.840.1.113669.632.21.1535143431.1078312707.29677650982447939 | 1086          |
| 2.16.840.1.113669.632.21.2760325203.621432694.176091396724285113 | 1095          |
| 2.16.840.1.113669.632.21.1267105285.1080344418.26857360392438571 | 1098          |
| 2.16.840.1.113669.632.21.1703110657.539385651.153506238227385913 | 1099          |
| 2.16.840.1.113669.632.21.1468427011.268795747.174224288624584051 | 1100          |
| 2.16.840.1.113669.632.21.1401253382.1079328595.77608654623884914 | 1101          |
| 2.16.840.1.113669.632.21.277215251.553717594.4438116332167261337 | 1120          |
| 2.16.840.1.113669.632.21.1166437889.1076125539.28918054842277301 | 1133          |
| 2.16.840.1.113669.632.21.1384607493.1348808563.20871340182247117 | 1136          |
| 2.16.840.1.113669.632.21.1518762245.811970402.771047674239833140 | 1136          |
| 2.16.840.1.113669.632.21.1652780292.1886793523.20996769512408891 | 1136          |
| 2.16.840.1.113669.632.21.1451916037.275083170.3005738292508971.1 | 1144          |
| 2.16.840.1.113669.632.21.1451321602.806711059.208887246241835132 | 1144          |
| 2.16.840.1.113669.632.21.2004973574.542605074.102791181724182714 | 1144          |
| 2.16.840.1.113669.632.21.1518697734.1884663634.53517443223988413 | 1147          |
| 2.16.840.1.113669.632.21.1417898243.805654323.293874716125587513 | 1149          |
| 2.16.840.1.113669.632.21.1401383941.1617248115.31229713932488731 | 1151          |
| 2.16.840.1.113669.632.21.677570816.808637995.1408643912327701425 | 1155          |
| 2.16.840.1.113669.632.21.1535606279.1078312818.96287320724287014 | 1155          |
| 2.16.840.1.113669.632.21.1451917060.1349873570.52684430823882413 | 1157          |
| 2.16.840.1.113669.632.21.1736536329.2963701522.29739057522508671 | 1160          |
| 2.16.840.1.113669.632.21.1116368389.1080307619.20379937022428491 | 1160          |
| 2.16.840.1.113669.632.21.1619228931.805703474.137533807426798913 | 1161          |
| 2.16.840.1.113669.632.21.1669360133.6700803.80466029522883914026 | 1163          |
| 2.16.840.1.113669.632.21.1418427912.1085624242.28615667072187501 | 1166          |
| 2.16.840.1.113669.632.21.1099656448.1882464179.10312776242438861 | 1166          |
| 2.16.840.1.113669.632.21.1267362563.268746659.913684622247849142 | 1166          |
| 2.16.840.1.113669.632.21.1652648704.271986451.315661525925488613 | 1172          |
| 2.16.840.1.113669.632.21.1451391232.808808226.370234956922477714 | 1172          |
| 2.16.840.1.113669.632.21.1518369026.806727426.149487484725689113 | 1174          |
| 2.16.840.1.113669.632.21.1417899525.1080381235.13320754232498851 | 1178          |
| 2.16.840.1.113669.632.21.1652715784.2964729634.13464818312548621 | 1191          |
| 2.16.840.1.113669.632.21.2759944259.604655379.122398789626091313 | 1194          |
| 2.16.840.1.113669.632.21.1267166977.1344585587.73965466624789013 | 1196          |
| 2.16.840.1.113669.632.21.1518566401.1613082418.29260906322539071 | 1197          |
| 2.16.840.1.113669.632.21.1149660163.1610895203.45194251625190013 | 1200          |
| 2.16.840.1.113669.632.21.2760202243.537546576.127465953725894713 | 1204          |
| 2.16.840.1.113669.632.21.1082420225.1612975939.10229691592248201 | 1210          |
| 2.16.840.1.113669.632.21.1368092676.2692030386.10750538342458344 | 1215          |
| 2.16.840.1.113669.632.21.1099259910.2689867603.97860987923986114 | 1215          |
| 2.16.840.1.113669.632.21.1351313410.538251187.956440330255891141 | 1215          |
| 2.16.840.1.113669.632.21.1518758148.813018979.183086057822881213 | 1218          |
| 2.16.840.1.113669.632.21.1669824260.1349926770.65853531922074014 | 1223          |
| 2.16.840.1.113669.632.21.1116041217.2686725970.27055245312388481 | 1224          |
| 2.16.840.1.113669.632.21.1635805960.280370947.206408861024191513 | 1226          |
| 2.16.840.1.113669.632.21.1518562566.1884663603.18659216852439151 | 1226          |
| 2.16.840.1.113669.632.21.1435136264.2964676514.10056787752408601 | 1227          |
| 2.16.840.1.113669.632.21.1401581570.2685747106.18791947372579301 | 1230          |
| 2.16.840.1.113669.632.21.1182818562.2954129155.37321714022482161 | 1232          |
| 2.16.840.1.113669.632.21.1367830275.1342513011.15426175182468881 | 1237          |
| 2.16.840.1.113669.632.21.1535798787.1074118563.13947702122473613 | 1242          |
| 2.16.840.1.113669.632.21.1149987584.271863731.270356208124084413 | 1245          |
| 2.16.840.1.113669.632.21.1736473605.1617329922.45928224322275413 | 1251          |
| 2.16.840.1.113669.632.21.1183080711.2957274947.15972039912338361 | 1259          |
| 2.16.840.1.113669.632.21.1266704391.2688859907.15837161322438511 | 1259          |
| 2.16.840.1.113669.632.21.1535798279.1615183779.52140616423583913 | 1262          |
| 2.16.840.1.113669.632.21.1133207553.2686730163.64510893223882514 | 1270          |
| 2.16.840.1.113669.632.21.1535213315.1342553874.31887911402488529 | 1270          |
| 2.16.840.1.113669.632.21.1368025091.537206691.913324547215705141 | 1272          |
| 2.16.840.1.113669.632.21.1367697926.5578579.18823273792448441355 | 1275          |
| 2.16.840.1.113669.632.21.689795332.2960310738.189622026224588313 | 1276          |
| 2.16.840.1.113669.632.21.1468100869.2959441682.99341222623681414 | 1278          |
| 2.16.840.1.113669.632.21.1267429125.1348779955.43866347423684813 | 1289          |
| 2.16.840.1.113669.632.21.1183546368.1614049202.68009587622183913 | 1295          |
| 2.16.840.1.113669.632.21.1082879744.1345589171.13902313622884114 | 1299          |
| 2.16.840.1.113669.632.21.1099329542.2689867618.10554575362288291 | 1309          |
| 2.16.840.1.113669.632.21.1250652421.2959388594.10067411922377851 | 1335          |
| 2.16.840.1.113669.632.21.1434542342.2958384915.23325136122480214 | 1355          |
| 2.16.840.1.113669.632.21.1653047040.1345728370.29055982323883213 | 1355          |
| 2.16.840.1.113669.632.21.1350790919.1346703155.11584825824785214 | 1424          |
| 2.16.840.1.113669.632.21.1535147779.1342553858.79108565923984814 | 1622          |
| 2.16.840.1.113669.632.21.1669556745.10895155.1547144613254907137 | 2003          |

</details>


# Notes

[Étapes pour reconstruire le projet](steps.md)